(function(){"use strict";var e={5274:function(e,t,a){var s=a(821);function i(e,t,a,i,n,o){const l=(0,s.up)("the-navigation"),r=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(l),(0,s._)("main",null,[(0,s.Wm)(r,null,{default:(0,s.w5)((({Component:e})=>[((0,s.wg)(),(0,s.j4)(s.Ob,null,[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))],1024))])),_:1})])],64)}function n(e,t,a,i,n,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("header",null,[(0,s._)("nav",null,[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Wm)(l,{class:(0,s.C_)(o.disabledSchemeLink),to:"/page1"},{default:(0,s.w5)((()=>[(0,s.Uk)("Расчетная схема")])),_:1},8,["class"])]),(0,s._)("li",null,[(0,s.Wm)(l,{class:(0,s.C_)(o.disabledLink),to:"/page2"},{default:(0,s.w5)((()=>[(0,s.Uk)("Расчетные свойства")])),_:1},8,["class"])]),(0,s._)("li",null,[(0,s.Wm)(l,{class:(0,s.C_)(o.disabledLink),to:"/page3"},{default:(0,s.w5)((()=>[(0,s.Uk)("Характеристики материалов")])),_:1},8,["class"])]),(0,s._)("li",null,[(0,s.Wm)(l,{class:(0,s.C_)(o.disabledStagesLink),to:"/page4"},{default:(0,s.w5)((()=>[(0,s.Uk)("Расчетные этапы")])),_:1},8,["class"])]),(0,s._)("li",null,[(0,s.Wm)(l,{class:(0,s.C_)(o.disabledResultsLink),to:"/page5"},{default:(0,s.w5)((()=>[(0,s.Uk)("Результаты расчета")])),_:1},8,["class"])])])])])}var o=a(3907),l={computed:{...(0,o.Se)(["gmshData","propertiesData","stageData","characteristicsData","isLoading"]),disabledSchemeLink(){return this.isLoading?"disabled-link":""},disabledLink(){return!this.gmshData||this.isLoading?"disabled-link":""},disabledStagesLink(){return 0===Object.keys(this.propertiesData).length||0===Object.keys(this.characteristicsData).length||this.isLoading?"disabled-link":""},disabledResultsLink(){return 0===Object.keys(this.stageData).length?"disabled-link":""}}},r=a(3744);const d=(0,r.Z)(l,[["render",n],["__scopeId","data-v-4680c8c3"]]);var c=d,u={components:{TheNavigation:c}};const p=(0,r.Z)(u,[["render",i]]);var v=p,m=a(2201);const h=e=>((0,s.dD)("data-v-e38f7458"),e=e(),(0,s.Cn)(),e),g=h((()=>(0,s._)("h1",{class:"bubble"},"Этап 1. Создание расчетной схемы",-1))),_=h((()=>(0,s._)("div",{class:"control-btns"},[(0,s._)("a",{class:"bubble",href:"https://google.com",target:"_blank"},"Скачать программу gmsh"),(0,s._)("a",{class:"bubble",href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstley",target:"_blank"},"Инструкция по созданию схемы")],-1))),y=h((()=>(0,s._)("h2",null,"Выберите тип задачи",-1))),f=h((()=>(0,s._)("option",{selected:"",value:"elasticity"},"Задача упругости",-1))),b=h((()=>(0,s._)("option",{value:"filtration"},"Задача фильтрации",-1))),w=h((()=>(0,s._)("option",{value:"temperature"},"Задача температуры",-1))),D=h((()=>(0,s._)("option",{value:"nonlinearity"},"Задача нелинейности",-1))),k=[f,b,w,D],S=h((()=>(0,s._)("label",{for:"files",class:"drop-container",id:"dropcontainer"},[(0,s._)("span",{class:"drop-title"},"Перенесите файл gmsh"),(0,s.Uk)(" или "),(0,s._)("input",{type:"file",id:"files",required:""})],-1))),T=h((()=>(0,s._)("div",{class:"line"},null,-1)));function L(e,t,a,i,n,o){const l=(0,s.up)("the-figure");return(0,s.wg)(),(0,s.iD)("section",null,[g,_,(0,s._)("div",null,[y,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.taskType=e)},k,512),[[s.bM,n.taskType]])]),S,(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>o.displaySchemeAndTable&&o.displaySchemeAndTable(...e)),class:(0,s.C_)(["bubble btn",o.disabledButton])}," Загрузить расчетную схему ",2),T,(0,s.Wm)(l,{"figure-name":"fig01"})])}a(560);var C=a(5121),I={data(){return{taskType:"elasticity"}},computed:{...(0,o.Se)(["gmshData","calculatedSchemeData","linesData","polygonsData","coordsData","isLoading"]),disabledButton(){return this.isLoading?"disabled__btn":""}},methods:{...(0,o.nv)(["sendTaskType","sendDataFromFile","sendLinesData","sendPolygonsData","sendCoordsData","sendPropertiesData","sendCharacteristicsData","sendStageData","sendToast","sendIsLoading"]),async displaySchemeAndTable(){this.sendLinesData({linesData:[]}),this.sendPolygonsData({polygonsData:[]}),this.sendCoordsData({coordsData:[]}),this.sendPropertiesData({propertiesData:{}}),this.sendCharacteristicsData({characteristicsData:{}}),this.sendStageData({stageData:{}});const e=document.getElementById("files");if(e.files.length<=0)return void this.sendToast({toastInfo:{msg:"Необходимо загрузить gmsh файл!",type:"error"}});if(e.files.length>1)return void this.sendToast({toastInfo:{msg:"Необходимо загрузить лишь один gmsh файл!",type:"error"}});if(""!==e.files[0].type)return void this.sendToast({toastInfo:{msg:"Необходимо загрузить файл из gmsh!",type:"error"}});this.sendToast({toastInfo:{msg:"Загрузка файла...",type:"info"}}),this.sendIsLoading({isLoading:!0});const t=new FileReader;t.readAsText(e.files[0]),t.onload=async()=>{const t=await this.getData(e.files[0]);if(this.sendTaskType({taskType:this.taskType}),console.log(t),400===t.status)return this.sendToast({toastInfo:{msg:t.msg,type:"error"}}),void this.sendIsLoading({isLoading:!1});const a=JSON.parse(t.json),i=t.calculatedSchemeData;this.sendDataFromFile({jsonData:a,calculatedSchemeData:i});const n=this.drawFigure();if(n)return;if(!(0,s.X3)(this.calculatedSchemeData))return;const o=(0,s.IU)(this.calculatedSchemeData),l=o.list_node_line,r=o.list_node_polygon,d=o.list_node_coor;let c=[];Object.entries(l).forEach((e=>{c.push(e)})),this.sendLinesData({linesData:c}),c=[],Object.entries(r).forEach((e=>{c.push(e)})),this.sendPolygonsData({polygonsData:c}),c=[],Object.entries(d).forEach((e=>{c.push(e)})),this.sendCoordsData({coordsData:c}),console.log(this.taskType),this.sendToast({toastInfo:{msg:t.msg,type:"ok"}}),this.sendIsLoading({isLoading:!1})}},async getData(e){const t=new FormData,a=$("input[name=csrfmiddlewaretoken]").val();t.append("gmshFile",e),t.append("csrfmiddlewaretoken",a),t.append("taskType",this.taskType);const s=await C.Z.post("api/parser_data/",t,{headers:{"Content-Type":"multipart/form-data"}});return s.data},drawFigure(){try{const e=document.querySelector("#fig01");e.innerHTML="",mpld3.draw_figure("fig01",this.gmshData);const t=document.querySelector(".mpld3-staticpaths");return Array.from(t.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))})),!1}catch(e){return this.sendToast({toastInfo:{msg:"Библиотека mpld3 была загружена некорректно. Пожалуйста, перезагрузите страницу.",type:"error"}}),!0}}},mounted(){const e=document.getElementById("dropcontainer"),t=document.getElementById("files");e.addEventListener("dragover",(e=>{e.preventDefault()}),!1),e.addEventListener("dragenter",(()=>{e.classList.add("drag-active")})),e.addEventListener("dragleave",(()=>{e.classList.remove("drag-active")})),e.addEventListener("drop",(a=>{a.preventDefault(),e.classList.remove("drag-active"),t.files=a.dataTransfer.files}))}};const q=(0,r.Z)(I,[["render",L],["__scopeId","data-v-e38f7458"]]);var P=q;const x=e=>((0,s.dD)("data-v-74bac5f4"),e=e(),(0,s.Cn)(),e),O=x((()=>(0,s._)("h1",{class:"bubble"},"Этап 2. Назначение расчетных свойств",-1)));function N(e,t,a,i,n,o){const l=(0,s.up)("the-figure"),r=(0,s.up)("table-properties");return(0,s.wg)(),(0,s.iD)("section",null,[O,(0,s.Wm)(l,{"figure-name":"fig01"}),(0,s.Wm)(r,{"lines-data":e.linesData,"polygons-data":e.polygonsData},null,8,["lines-data","polygons-data"])])}const j=e=>((0,s.dD)("data-v-14eb4834"),e=e(),(0,s.Cn)(),e),A={class:"properties-container"},E={class:"table"},M=j((()=>(0,s._)("div",{class:"tr"},[(0,s._)("div",{class:"th"},"Наименование объекта"),(0,s._)("div",{class:"th"},"Назначение свойств")],-1))),F={class:"generated-table"},H={class:"toggle-container"},U={class:"generated-table"},W={class:"toggle-container"};function Z(e,t,a,i,n,o){const l=(0,s.up)("polygon-property"),r=(0,s.up)("line-property");return(0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("div",E,[M,(0,s._)("div",F,[(0,s._)("div",H,[(0,s._)("div",{onClick:t[0]||(t[0]=(...e)=>o.togglePolygons&&o.togglePolygons(...e))},(0,s.zw)(o.polygonsLabel)+" полигоны (размер: "+(0,s.zw)(a.polygonsData.length)+") ",1),(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.polygonsArrowState]),onClick:t[1]||(t[1]=(...e)=>o.togglePolygons&&o.togglePolygons(...e))},null,2)])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.polygonsData,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(l,{key:e[0],"polygon-name":e[0]},null,8,["polygon-name"])),[[s.F8,n.showPolygons]]))),128)),(0,s._)("div",U,[(0,s._)("div",W,[(0,s._)("div",{onClick:t[2]||(t[2]=(...e)=>o.toggleLines&&o.toggleLines(...e))},(0,s.zw)(o.linesLabel)+" линии (размер: "+(0,s.zw)(a.linesData.length)+") ",1),(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.linesArrowState]),onClick:t[3]||(t[3]=(...e)=>o.toggleLines&&o.toggleLines(...e))},null,2)])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.linesData,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{key:e[0],"line-name":e[0]},null,8,["line-name"])),[[s.F8,n.showLines]]))),128))]),(0,s._)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>o.applyProperties&&o.applyProperties(...e))},"Применить свойства")])}const B={class:"generated-table"},z={class:"tr"},R={class:"td"},Y=(0,s._)("div",{class:"td"},"Материал",-1);function K(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",z,[(0,s._)("div",R,(0,s.zw)(a.polygonName),1),Y])])}var X={props:["polygonName"]};const V=(0,r.Z)(X,[["render",K]]);var J=V;const Q={class:"generated-table"},G={class:"tr"},ee={class:"td td--header"},te={class:"td"},ae=(0,s.uE)('<div class="tr" data-v-44d2f3b5><div class="td" data-v-44d2f3b5>- Свойство плита</div><div class="td td--checkbox-container" data-v-44d2f3b5><input type="checkbox" id="plate-property" name="plate-property" data-v-44d2f3b5></div></div><div class="tr" data-v-44d2f3b5><div class="td" data-v-44d2f3b5>- Свойство нагрузка</div><div class="td td--checkbox-container" data-v-44d2f3b5><input type="checkbox" id="load-property" name="load-property" data-v-44d2f3b5></div></div><div class="tr" data-v-44d2f3b5><div class="td" data-v-44d2f3b5>- Свойство распорка</div><div class="td td--checkbox-container" data-v-44d2f3b5><input type="checkbox" id="spacer-property" name="spacer-property" data-v-44d2f3b5></div></div><div class="tr" data-v-44d2f3b5><div class="td" data-v-44d2f3b5>- Свойства граничное условие</div><div class="td td--checkbox-container" data-v-44d2f3b5><input type="checkbox" id="boundary-condition-property" name="boundary-condition-property" data-v-44d2f3b5></div></div>',4),se=[ae];function ie(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",Q,[(0,s._)("div",G,[(0,s._)("div",ee,[(0,s._)("div",{class:"line-row",onClick:t[0]||(t[0]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},(0,s.zw)(a.lineName),1),(0,s._)("div",null,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.arrowState]),onClick:t[1]||(t[1]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},null,2)])]),(0,s.wy)((0,s._)("div",te,se,512),[[s.F8,n.infoShow]])])])}var ne={props:["lineName"],data(){return{infoShow:!1}},computed:{arrowState(){return this.infoShow?"fa-chevron-down":"fa-chevron-right"}},methods:{toggleInfo(){this.infoShow=!this.infoShow}}};const oe=(0,r.Z)(ne,[["render",ie],["__scopeId","data-v-44d2f3b5"]]);var le=oe,re={components:{PolygonProperty:J,LineProperty:le},props:["polygonsData","linesData"],data(){return{showPolygons:!1,showLines:!1}},computed:{...(0,o.Se)(["propertiesData"]),linesArrowState(){return this.showLines?"fa-chevron-down":"fa-chevron-right"},polygonsArrowState(){return this.showPolygons?"fa-chevron-down":"fa-chevron-right"},linesLabel(){return this.showLines?"Скрыть":"Показать"},polygonsLabel(){return this.showPolygons?"Скрыть":"Показать"}},methods:{...(0,o.nv)(["sendPropertiesData","sendToast"]),toggleLines(){this.showLines=!this.showLines},togglePolygons(){this.showPolygons=!this.showPolygons},async applyProperties(){let e=[],t=[];const a=document.querySelectorAll("#plate-property"),s=document.querySelectorAll("#load-property"),i=document.querySelectorAll("#spacer-property"),n=document.querySelectorAll("#boundary-condition-property");for(let o=0;o<this.linesData.length;o++)(a[o].checked||s[o].checked||i[o].chcked||n[o].checked)&&e.push({[this.linesData[o][0]]:{plateProperty:a[o].checked,loadProperty:s[o].checked,spacerProperty:i[o].checked,boundaryCondition:n[o].checked}});this.polygonsData.forEach((e=>{t.push({[e[0]]:"material"})})),this.sendPropertiesData({propertiesData:{}}),this.sendPropertiesData({propertiesData:{linesProperties:e,polygonsProperties:t}}),console.log(this.propertiesData),this.sendToast({toastInfo:{msg:"Свойства успешно сохранены!",type:"ok"}})}}};const de=(0,r.Z)(re,[["render",Z],["__scopeId","data-v-14eb4834"]]);var ce=de,ue={components:{TableProperties:ce},computed:{...(0,o.Se)(["gmshData","linesData","polygonsData","propertiesData"])},mounted(){if(null===this.gmshData)return;mpld3.draw_figure("fig01",this.gmshData);const e=document.querySelector(".mpld3-staticpaths");Array.from(e.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}))},updated(){if(0===Object.values(this.propertiesData).length){const e=document.querySelector("#fig01");e.innerHTML="",mpld3.draw_figure("fig01",this.gmshData);const t=document.querySelector(".mpld3-staticpaths");Array.from(t.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}));const a=document.querySelectorAll("#plate-property"),s=document.querySelectorAll("#load-property"),i=document.querySelectorAll("#spacer-property"),n=document.querySelectorAll("#boundary-condition-property");a.forEach((e=>{e.checked&&(e.checked=!1)})),s.forEach((e=>{e.checked&&(e.checked=!1)})),i.forEach((e=>{e.checked&&(e.checked=!1)})),n.forEach((e=>{e.checked&&(e.checked=!1)}))}}};const pe=(0,r.Z)(ue,[["render",N],["__scopeId","data-v-74bac5f4"]]);var ve=pe;const me=e=>((0,s.dD)("data-v-05f43ca8"),e=e(),(0,s.Cn)(),e),he=me((()=>(0,s._)("h1",{class:"bubble"},"Этап 3. Назначение характеристик материалов",-1)));function ge(e,t,a,i,n,o){const l=(0,s.up)("the-figure"),r=(0,s.up)("table-characteristics");return(0,s.wg)(),(0,s.iD)("section",null,[he,(0,s.Wm)(l,{"figure-name":"fig01"}),(0,s.Wm)(r)])}const _e=e=>((0,s.dD)("data-v-439483cd"),e=e(),(0,s.Cn)(),e),ye={class:"characteristics-container"},fe={class:"table"},be=_e((()=>(0,s._)("div",{class:"tr tr--header"},[(0,s._)("div",{class:"th"},"Наименование объекта"),(0,s._)("div",{class:"th"},"Общие параметры"),(0,s._)("div",{class:"th"},"Значение")],-1))),we={class:"generated-table"},De={class:"toggle-container"},ke={class:"btn-add__container"},Se={class:"generated-table"},Te={class:"toggle-container"},Le={class:"btn-add__container"};function Ce(e,t,a,i,n,o){const l=(0,s.up)("two-dimensions"),r=(0,s.up)("one-dimension-element");return(0,s.wg)(),(0,s.iD)("div",ye,[(0,s._)("div",fe,[be,(0,s._)("div",we,[(0,s._)("div",De,[(0,s._)("div",{onClick:t[0]||(t[0]=(...e)=>o.toggleTwoDim&&o.toggleTwoDim(...e))},(0,s.zw)(o.twoDimLabel)+" 2d материалы (размер: "+(0,s.zw)(n.countTwoDimRows)+") ",1),(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.twoDimArrowState]),onClick:t[1]||(t[1]=(...e)=>o.toggleTwoDim&&o.toggleTwoDim(...e))},null,2)])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.countTwoDimRows,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(l,{key:e,id:e},null,8,["id"])),[[s.F8,n.showTwoDim]]))),128)),(0,s.wy)((0,s._)("div",ke,[(0,s._)("button",{class:"add-dim",onClick:t[2]||(t[2]=(...e)=>o.addTwoDim&&o.addTwoDim(...e))},"Добавить материал")],512),[[s.F8,n.showTwoDim]]),(0,s._)("div",Se,[(0,s._)("div",Te,[(0,s._)("div",{onClick:t[3]||(t[3]=(...e)=>o.toggleOneDim&&o.toggleOneDim(...e))},(0,s.zw)(o.oneDimLabel)+" 1d материалы (размер: "+(0,s.zw)(n.countOneDimRows)+") ",1),(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.oneDimArrowState]),onClick:t[4]||(t[4]=(...e)=>o.toggleOneDim&&o.toggleOneDim(...e))},null,2)])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.countOneDimRows,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{key:e,id:e},null,8,["id"])),[[s.F8,n.showOneDim]]))),128)),(0,s.wy)((0,s._)("div",Le,[(0,s._)("button",{class:"add-dim",onClick:t[5]||(t[5]=(...e)=>o.addOneDim&&o.addOneDim(...e))},"Добавить материал")],512),[[s.F8,n.showOneDim]])]),(0,s._)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>o.applyCharacteristics&&o.applyCharacteristics(...e))}," Сохранить материалы ")])}const Ie=e=>((0,s.dD)("data-v-70432dfb"),e=e(),(0,s.Cn)(),e),qe={class:"generated-table table--2d"},Pe={class:"tr"},$e={class:"td td--header"},xe=["id"],Oe={class:"tr tr--multi-row"},Ne=Ie((()=>(0,s._)("div",{class:"td"},"Удельный вес, кН/м³",-1))),je=Ie((()=>(0,s._)("div",{class:"td"},"Коэффициент Пуассона",-1))),Ae=Ie((()=>(0,s._)("div",{class:"td adv-params__label"},"Дополнительные параметры",-1))),Ee={key:0,class:"td td-wide"},Me={key:1,class:"td td-wide"},Fe={key:2,class:"td td-wide"},He={key:3,class:"td td-wide"},Ue={key:4,class:"td td-wide"},We={class:"tr tr--multi-row"},Ze={class:"td"},Be=["id"],ze={class:"td"},Re=["id"],Ye={class:"td adv-params"},Ke=Ie((()=>(0,s._)("label",null,"Фильтрация:",-1))),Xe=Ie((()=>(0,s._)("label",null,"Температура:",-1))),Ve={key:0,class:"td adv-params__container"},Je=["id"],Qe={key:1,class:"td adv-params__container"},Ge=["id"],et={key:2,class:"td adv-params__container"},tt=["id"],at={key:3,class:"td adv-params__container"},st=["id"],it={key:4,class:"td adv-params__container"},nt=["id"],ot={class:"tr"},lt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),rt=Ie((()=>(0,s._)("div",{class:"td td--h"},"Механические параметры",-1))),dt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),ct=[lt,rt,dt],ut={class:"tr"},pt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),vt={class:"td td--h"},mt=["id"],ht=Ie((()=>(0,s._)("option",{value:"linear-elastic"},"Linear elastic",-1))),gt=Ie((()=>(0,s._)("option",{value:"mohr-coloumb"},"Mohr-coloumb",-1))),_t=Ie((()=>(0,s._)("option",{value:"cam-clay"},"Modify cam-clay",-1))),yt=[ht,gt,_t],ft=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),bt={key:0,class:"tr"},wt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Dt=Ie((()=>(0,s._)("div",{class:"td"},"Модуль упругости, кПа",-1))),kt={class:"td"},St=["id"],Tt={key:1,class:"tr"},Lt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Ct=Ie((()=>(0,s._)("div",{class:"td"},"Модуль упругости, кПа",-1))),It={class:"td"},qt=["id"],Pt={key:2,class:"tr"},$t=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),xt=Ie((()=>(0,s._)("div",{class:"td"},"Угол внутреннего трения, град",-1))),Ot={class:"td"},Nt=["id"],jt={key:3,class:"tr"},At=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Et=Ie((()=>(0,s._)("div",{class:"td"},"Удельное сцепление, кПа",-1))),Mt={class:"td"},Ft=["id"],Ht={key:4,class:"tr"},Ut=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Wt=Ie((()=>(0,s._)("div",{class:"td"},"Угол дилатансии, град",-1))),Zt={class:"td"},Bt=["id"],zt={key:5,class:"tr"},Rt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Yt=Ie((()=>(0,s._)("div",{class:"td"},"Прочность на растяжение, кПа",-1))),Kt={class:"td"},Xt=["id"],Vt={key:6,class:"tr"},Jt=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),Qt=Ie((()=>(0,s._)("div",{class:"td"},"Индекс компрессии",-1))),Gt={class:"td"},ea=["id"],ta={key:7,class:"tr"},aa=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),sa=Ie((()=>(0,s._)("div",{class:"td"},"Индекс рекомпрессии",-1))),ia={class:"td"},na=["id"],oa={key:8,class:"tr"},la=Ie((()=>(0,s._)("div",{class:"td"},null,-1))),ra=Ie((()=>(0,s._)("div",{class:"td"},"Mcsl",-1))),da={class:"td"},ca=["id"];function ua(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",qe,[(0,s._)("div",Pe,[(0,s._)("div",$e,[(0,s._)("div",{class:"line-row",onClick:t[0]||(t[0]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},[(0,s._)("input",{type:"text",id:`name-${a.id}`,placeholder:"Введите название..."},null,8,xe)]),(0,s._)("div",null,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.arrowState]),onClick:t[1]||(t[1]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},null,2)])]),(0,s.wy)((0,s._)("div",Oe,[Ne,je,Ae,n.filtrationShow?((0,s.wg)(),(0,s.iD)("div",Ee," Коэф. фильтрации по оси x, м/сут ")):(0,s.kq)("",!0),n.filtrationShow?((0,s.wg)(),(0,s.iD)("div",Me," Коэф. фильтрации по оси y, м/сут ")):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",Fe," Коэф. теплопроводности, кВт/м/°C ")):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",He," Удельная теплоемкость, кДж/т/°C ")):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",Ue,"Удельная плотность, т/м³")):(0,s.kq)("",!0)],512),[[s.F8,n.infoShow]]),(0,s.wy)((0,s._)("div",We,[(0,s._)("div",Ze,[(0,s._)("input",{type:"number",id:`weight-${a.id}`,placeholder:"Введите значение..."},null,8,Be)]),(0,s._)("div",ze,[(0,s._)("input",{type:"number",id:`poisson-${a.id}`,placeholder:"Введите значение..."},null,8,Re)]),(0,s._)("div",Ye,[(0,s._)("div",null,[Ke,(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>n.filtrationShow=e)},null,512),[[s.e8,n.filtrationShow]])]),(0,s._)("div",null,[Xe,(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>n.tempShow=e)},null,512),[[s.e8,n.tempShow]])])]),n.filtrationShow?((0,s.wg)(),(0,s.iD)("div",Ve,[(0,s._)("input",{type:"text",id:`filtration-x-${a.id}`,placeholder:"Введите значение..."},null,8,Je)])):(0,s.kq)("",!0),n.filtrationShow?((0,s.wg)(),(0,s.iD)("div",Qe,[(0,s._)("input",{type:"text",id:`filtration-y-${a.id}`,placeholder:"Введите значение..."},null,8,Ge)])):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",et,[(0,s._)("input",{type:"text",id:`temperature-coef-${a.id}`,placeholder:"Введите значение..."},null,8,tt)])):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",at,[(0,s._)("input",{type:"text",id:`temperature-heat-${a.id}`,placeholder:"Введите значение..."},null,8,st)])):(0,s.kq)("",!0),n.tempShow?((0,s.wg)(),(0,s.iD)("div",it,[(0,s._)("input",{type:"text",id:`temperature-density-${a.id}`,placeholder:"Введите значение..."},null,8,nt)])):(0,s.kq)("",!0)],512),[[s.F8,n.infoShow]])]),(0,s.wy)((0,s._)("div",ot,ct,512),[[s.F8,n.infoShow]]),(0,s.wy)((0,s._)("div",ut,[pt,(0,s._)("div",vt,[(0,s._)("select",{onChange:t[4]||(t[4]=e=>o.changeCurrentParameter(e)),id:`mech-parameter-${a.id}`},yt,40,mt)]),ft],512),[[s.F8,n.infoShow]]),"linear-elastic"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",bt,[wt,Dt,(0,s._)("div",kt,[(0,s._)("input",{type:"number",id:`linear-elastic-${a.id}`,placeholder:"Введите значение..."},null,8,St)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"mohr-coloumb"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Tt,[Lt,Ct,(0,s._)("div",It,[(0,s._)("input",{type:"number",id:`mohr-coloumb-${a.id}`,placeholder:"Введите значение..."},null,8,qt)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"mohr-coloumb"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Pt,[$t,xt,(0,s._)("div",Ot,[(0,s._)("input",{type:"number",id:`mohr-coloumb-${a.id}`,placeholder:"Введите значение..."},null,8,Nt)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"mohr-coloumb"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",jt,[At,Et,(0,s._)("div",Mt,[(0,s._)("input",{type:"number",id:`mohr-coloumb-${a.id}`,placeholder:"Введите значение..."},null,8,Ft)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"mohr-coloumb"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Ht,[Ut,Wt,(0,s._)("div",Zt,[(0,s._)("input",{type:"number",id:`mohr-coloumb-${a.id}`,placeholder:"Введите значение..."},null,8,Bt)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"mohr-coloumb"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",zt,[Rt,Yt,(0,s._)("div",Kt,[(0,s._)("input",{type:"number",id:`mohr-coloumb-${a.id}`,placeholder:"Введите значение..."},null,8,Xt)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"cam-clay"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Vt,[Jt,Qt,(0,s._)("div",Gt,[(0,s._)("input",{type:"number",id:`cam-clay-${a.id}`,placeholder:"Введите значение..."},null,8,ea)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"cam-clay"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",ta,[aa,sa,(0,s._)("div",ia,[(0,s._)("input",{type:"number",id:`cam-clay-${a.id}`,placeholder:"Введите значение..."},null,8,na)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0),"cam-clay"===n.selectedParameter?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",oa,[la,ra,(0,s._)("div",da,[(0,s._)("input",{type:"number",id:`cam-clay-${a.id}`,placeholder:"Введите значение..."},null,8,ca)])],512)),[[s.F8,n.infoShow]]):(0,s.kq)("",!0)])}var pa={props:["id"],data(){return{selectedParameter:"linear-elastic",infoShow:!1,filtrationShow:!1,tempShow:!1}},computed:{arrowState(){return this.infoShow?"fa-chevron-down":"fa-chevron-right"}},methods:{changeCurrentParameter(e){this.selectedParameter=e.target.value},toggleInfo(){this.infoShow=!this.infoShow}}};const va=(0,r.Z)(pa,[["render",ua],["__scopeId","data-v-70432dfb"]]);var ma=va;const ha=e=>((0,s.dD)("data-v-2c295347"),e=e(),(0,s.Cn)(),e),ga={class:"generated-table table--1d"},_a={class:"tr"},ya={class:"td td--header"},fa=["id"],ba={class:"tr tr--multi-row"},wa=(0,s.uE)('<div class="td" data-v-2c295347>Удельный вес, кН/м³</div><div class="td" data-v-2c295347>Коэффициент Пуассона</div><div class="td" data-v-2c295347>Модуль упругости, кПа</div><div class="td" data-v-2c295347>Площадь сечения, м²</div><div class="td" data-v-2c295347>Момент инерции, м⁴</div><div class="td" data-v-2c295347>Выбрать тип работы:</div>',6),Da=[wa],ka={class:"tr tr--multi-row"},Sa={class:"td"},Ta=["id"],La={class:"td"},Ca=["id"],Ia={class:"td"},qa=["id"],Pa={class:"td"},$a=["id"],xa={class:"td"},Oa=["id"],Na={class:"td td--select"},ja=["id"],Aa=ha((()=>(0,s._)("option",{value:"stretching-compression"},"Растяжение/сжатие",-1))),Ea=ha((()=>(0,s._)("option",{value:"stretching-compression-bending"}," Растяжение/сжатие/изгиб ",-1))),Ma=[Aa,Ea];function Fa(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",ga,[(0,s._)("div",_a,[(0,s._)("div",ya,[(0,s._)("div",{class:"line-row",onClick:t[0]||(t[0]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},[(0,s._)("input",{type:"text",id:`one-dim__name-${a.id}`,placeholder:"Введите название..."},null,8,fa)]),(0,s._)("div",null,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.arrowState]),onClick:t[1]||(t[1]=(...e)=>o.toggleInfo&&o.toggleInfo(...e))},null,2)])]),(0,s.wy)((0,s._)("div",ba,Da,512),[[s.F8,n.infoShow]]),(0,s.wy)((0,s._)("div",ka,[(0,s._)("div",Sa,[(0,s._)("input",{type:"number",id:`one-dim__weight-${a.id}`,placeholder:"Введите значение..."},null,8,Ta)]),(0,s._)("div",La,[(0,s._)("input",{type:"number",id:`one-dim__poisson-${a.id}`,placeholder:"Введите значение..."},null,8,Ca)]),(0,s._)("div",Ia,[(0,s._)("input",{type:"number",id:`elastic-modulus-${a.id}`,placeholder:"Введите значение..."},null,8,qa)]),(0,s._)("div",Pa,[(0,s._)("input",{type:"number",id:`sectional-area-${a.id}`,placeholder:"Введите значение..."},null,8,$a)]),(0,s._)("div",xa,[(0,s._)("input",{type:"number",id:`inertia-moment-${a.id}`,placeholder:"Введите значение..."},null,8,Oa)]),(0,s._)("div",Na,[(0,s._)("select",{id:`work-type-${a.id}`},Ma,8,ja)])],512),[[s.F8,n.infoShow]])])])}var Ha={props:["id"],data(){return{infoShow:!1}},computed:{arrowState(){return this.infoShow?"fa-chevron-down":"fa-chevron-right"}},methods:{toggleInfo(){this.infoShow=!this.infoShow}}};const Ua=(0,r.Z)(Ha,[["render",Fa],["__scopeId","data-v-2c295347"]]);var Wa=Ua,Za={components:{TwoDimensions:ma,OneDimensionElement:Wa},data(){return{showTwoDim:!1,showOneDim:!1,countTwoDimRows:0,twoDimData:[],selectedTwoDimId:null,countOneDimRows:0,oneDimData:[],selectedOneDimId:null}},computed:{...(0,o.Se)(["characteristicsData","propertiesData"]),oneDimArrowState(){return this.showOneDim?"fa-chevron-down":"fa-chevron-right"},twoDimArrowState(){return this.showTwoDim?"fa-chevron-down":"fa-chevron-right"},oneDimLabel(){return this.showOneDim?"Скрыть":"Показать"},twoDimLabel(){return this.showTwoDim?"Скрыть":"Показать"}},methods:{...(0,o.nv)(["sendCharacteristicsData","sendPropertiesData","sendToast"]),toggleOneDim(){this.showOneDim=!this.showOneDim},toggleTwoDim(){this.showTwoDim=!this.showTwoDim},addTwoDim(){this.countTwoDimRows++},addOneDim(){this.countOneDimRows++},async applyCharacteristics(){let e=[],t=[];for(let a=0;a<this.countTwoDimRows;a++){const t=a+1,s=document.querySelector(`#mech-parameter-${t}`),i=document.querySelector(`#name-${t}`).value,n=Number(document.querySelector(`#weight-${t}`).value),o=Number(document.querySelector(`#poisson-${t}`).value);if("linear-elastic"===s.value){const a=Number(document.querySelector(`#linear-elastic-${t}`).value);e.push({[i]:{weight:n,poisson:o,mechParameter:s.value,elasticModulus:a}})}else if("mohr-coloumb"===s.value){const l=document.querySelectorAll(`#mohr-coloumb-${t}`);e.push({[i]:{weight:n,poisson:o,mechParameter:s.value}}),l.forEach(((t,s)=>{switch(s){case 0:e[a][i].elasticModulus=Number(t.value);break;case 1:e[a][i].internalFrictionAngle=Number(t.value);break;case 2:e[a][i].adhesion=Number(t.value);break;case 3:e[a][i].dilatancyAngle=Number(t.value);break;case 4:e[a][i].tensileStrength=Number(t.value);break}}))}else{if("cam-clay"!==s.value)return void console.error("Error: unexpected select value.");{const l=document.querySelectorAll(`#cam-clay-${t}`);e.push({[i]:{weight:n,poisson:o,mechParameter:s.value}}),l.forEach(((t,s)=>{switch(s){case 0:e[a][i].compressionIndex=Number(t.value);break;case 1:e[a][i].recompressionIndex=Number(t.value);break;case 2:e[a][i].mscl=Number(t.value);break}}))}}if(document.querySelector(`#filtration-x-${t}`)){const s=Number(document.querySelector(`#filtration-x-${t}`).value),n=Number(document.querySelector(`#filtration-y-${t}`).value);e[a][i].filtrationX=s,e[a][i].filtrationY=n}if(document.querySelector(`#temperature-coef-${t}`)){const s=Number(document.querySelector(`#temperature-coef-${t}`).value),n=Number(document.querySelector(`#temperature-heat-${t}`).value),o=Number(document.querySelector(`#temperature-density-${t}`).value);e[a][i].tempCoef=s,e[a][i].tempHeat=n,e[a][i].tempDensity=o}}for(let a=0;a<this.countOneDimRows;a++){const e=a+1,s=Number(document.querySelector(`#one-dim__weight-${e}`).value),i=Number(document.querySelector(`#one-dim__poisson-${e}`).value),n=document.querySelector(`#one-dim__name-${e}`).value,o=document.querySelector(`#elastic-modulus-${e}`),l=document.querySelector(`#sectional-area-${e}`),r=document.querySelector(`#inertia-moment-${e}`),d=document.querySelector(`#work-type-${e}`);t.push({[n]:{weight:s,poisson:i,elasticModulus:Number(o.value),sectionalArea:Number(l.value),inertiaMoment:Number(r.value),workType:d.value}})}this.sendCharacteristicsData({characteristicsData:{}}),this.sendCharacteristicsData({characteristicsData:{oneDimData:t,twoDimData:e}}),console.log(this.characteristicsData),this.sendToast({toastInfo:{msg:"Библиотека материалов успешно сохранена!",type:"ok"}})}}};const Ba=(0,r.Z)(Za,[["render",Ce],["__scopeId","data-v-439483cd"]]);var za=Ba,Ra={components:{TableCharacteristics:za},computed:{...(0,o.Se)(["gmshData","linesData","polygonsData"])},mounted(){if(null===this.gmshData)return;mpld3.draw_figure("fig01",this.gmshData);const e=document.querySelector(".mpld3-staticpaths");Array.from(e.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}))},updated(){const e=document.querySelector("#fig01");e.innerHTML="",mpld3.draw_figure("fig01",this.gmshData);const t=document.querySelector(".mpld3-staticpaths");Array.from(t.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}))}};const Ya=(0,r.Z)(Ra,[["render",ge],["__scopeId","data-v-05f43ca8"]]);var Ka=Ya;const Xa=e=>((0,s.dD)("data-v-09460acc"),e=e(),(0,s.Cn)(),e),Va=Xa((()=>(0,s._)("h1",{class:"bubble"},"Этап 4. Создание расчетных этапов",-1)));function Ja(e,t,a,i,n,o){const l=(0,s.up)("the-figure"),r=(0,s.up)("tables-stage");return(0,s.wg)(),(0,s.iD)("section",null,[Va,(0,s.Wm)(l,{"figure-name":"fig01"}),(0,s.Wm)(r)])}const Qa={class:"btn__container"};function Ga(e,t,a,i,n,o){const l=(0,s.up)("the-stage"),r=(0,s.up)("temperature-table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(l,{"stage-name":"Фаза инициализации","task-type":e.taskType,"stage-type":"init"},null,8,["task-type"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.phasesNum,(t=>((0,s.wg)(),(0,s.j4)(l,{key:t,"stage-name":`Фаза ${t}`,"task-type":e.taskType,"stage-type":"phase"},null,8,["stage-name","task-type"])))),128)),(0,s.Wm)(r),(0,s._)("div",Qa,["nonlinearity"===e.taskType?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"add__phase",onClick:t[0]||(t[0]=(...e)=>o.addPhase&&o.addPhase(...e))}," Добавить фазу ")):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:"apply_stage",onClick:t[1]||(t[1]=(...e)=>o.applyStage&&o.applyStage(...e))}," Применить ")])],64)}const es={class:"bubble btn"};function ts(e,t,a,i,n,o){const l=(0,s.up)("init-table"),r=(0,s.up)("phase-table"),d=(0,s.up)("soil-table"),c=(0,s.up)("line-table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",es,(0,s.zw)(a.stageName),1),"init"===a.stageType&&"nonlinearity"===a.taskType?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0),"phase"===a.stageType&&"nonlinearity"===a.taskType?((0,s.wg)(),(0,s.j4)(r,{key:1})):(0,s.kq)("",!0),(0,s.Wm)(d),(0,s.Wm)(c)],64)}const as={class:"table"},ss=(0,s.uE)('<div class="tr" data-v-9a68ec72><div class="th" data-v-9a68ec72>Наименование полигона (Soil)</div><div class="th" data-v-9a68ec72>Материал</div><div class="th" data-v-9a68ec72>Активность на фазе</div><div class="th" data-v-9a68ec72>Примечание</div></div>',1);function is(e,t,a,i,n,o){const l=(0,s.up)("the-soil");return(0,s.wg)(),(0,s.iD)("div",as,[ss,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.polygonsData,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e[0],"soil-name":e[0]},null,8,["soil-name"])))),128))])}const ns=e=>((0,s.dD)("data-v-3377ae86"),e=e(),(0,s.Cn)(),e),os={class:"generated-table"},ls={class:"tr"},rs={class:"td"},ds={class:"td"},cs=["id"],us=ns((()=>(0,s._)("option",{value:"null"},null,-1))),ps=["value"],vs={class:"td"},ms=["id"],hs=ns((()=>(0,s._)("option",{selected:"",value:!0},"Да",-1))),gs=ns((()=>(0,s._)("option",{value:!1},"Нет",-1))),_s=[hs,gs],ys={class:"td"},fs=["id"];function bs(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",os,[(0,s._)("div",ls,[(0,s._)("div",rs,(0,s.zw)(a.soilName),1),(0,s._)("div",ds,[(0,s._)("select",{class:"select__material",id:`select__material--${a.soilName.toLowerCase()}`},[us,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.characteristicsData.twoDimData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:Object.keys(e)[0],value:Object.keys(e)[0]},(0,s.zw)(Object.keys(e)[0]),9,ps)))),128))],8,cs)]),(0,s._)("div",vs,[(0,s._)("select",{id:`select__activity--${a.soilName.toLowerCase()}`},_s,8,ms)]),(0,s._)("div",ys,[(0,s._)("input",{type:"text",id:`input__comment--${a.soilName.toLowerCase()}`,placeholder:"Введите текст..."},null,8,fs)])])])}var ws={props:["soilName"],computed:{...(0,o.Se)(["characteristicsData"])}};const Ds=(0,r.Z)(ws,[["render",bs],["__scopeId","data-v-3377ae86"]]);var ks=Ds,Ss={components:{TheSoil:ks},computed:{...(0,o.Se)(["polygonsData"])}};const Ts=(0,r.Z)(Ss,[["render",is],["__scopeId","data-v-9a68ec72"]]);var Ls=Ts;const Cs={class:"table"},Is=(0,s.uE)('<div class="tr" data-v-9d73ba72><div class="th" data-v-9d73ba72>Наименование полигона (Line)</div><div class="th" data-v-9d73ba72>Параметры свойств</div><div class="th" data-v-9d73ba72>Активность на фазе</div><div class="th" data-v-9d73ba72>Примечание</div></div>',1);function qs(e,t,a,i,n,o){const l=(0,s.up)("the-line");return(0,s.wg)(),(0,s.iD)("div",Cs,[Is,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.propertiesData.linesProperties,(e=>((0,s.wg)(),(0,s.j4)(l,{key:Object.keys(e)[0],"property-data":e},null,8,["property-data"])))),128))])}const Ps=e=>((0,s.dD)("data-v-6075b5d5"),e=e(),(0,s.Cn)(),e),$s={class:"generated-table"},xs={class:"tr"},Os={class:"td"},Ns={class:"td"},js={key:0},As={class:"toggle-container"},Es=Ps((()=>(0,s._)("div",null,"Нагрузка",-1))),Ms={class:"info-container"},Fs={class:"input-container"},Hs=Ps((()=>(0,s._)("label",null,"q, кПа = ",-1))),Us=["id"],Ws={key:1},Zs={class:"toggle-container"},Bs=Ps((()=>(0,s._)("div",null,"Граничные условия",-1))),zs={class:"info-container info-container--multi"},Rs={key:0,class:"input-container"},Ys=Ps((()=>(0,s._)("label",null,"ux, м = ",-1))),Ks=["id"],Xs={key:1,class:"input-container"},Vs=Ps((()=>(0,s._)("label",null,"uy, м = ",-1))),Js=["id"],Qs={key:2,class:"input-container"},Gs=Ps((()=>(0,s._)("label",null,"Узловой напор = ",-1))),ei=["id"],ti={key:3,class:"input-container"},ai=Ps((()=>(0,s._)("label",null,"Начальная температура, °C = ",-1))),si=["id"],ii={key:4,class:"input-container"},ni=Ps((()=>(0,s._)("label",null,"Температура на границе, °C = ",-1))),oi=["id"],li={key:2},ri={class:"toggle-container"},di=Ps((()=>(0,s._)("div",null,"Плита",-1))),ci={class:"info-container"},ui={class:"input-container input-container--select"},pi=Ps((()=>(0,s._)("label",null,"Выбор материала плиты:",-1))),vi=["id"],mi=Ps((()=>(0,s._)("option",{value:"null"},null,-1))),hi=["value"],gi={key:3},_i={class:"toggle-container"},yi=Ps((()=>(0,s._)("div",null,"Распорка",-1))),fi={class:"info-container"},bi={class:"input-container input-container--select"},wi=Ps((()=>(0,s._)("label",null,"Выбор материала распорки:",-1))),Di=["id"],ki=Ps((()=>(0,s._)("option",{value:"null"},null,-1))),Si=["value"],Ti={class:"td"},Li=["id"],Ci=Ps((()=>(0,s._)("option",{selected:"",value:!0},"Да",-1))),Ii=Ps((()=>(0,s._)("option",{value:!1},"Нет",-1))),qi=[Ci,Ii],Pi={class:"td"},$i=["id"];function xi(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",$s,[(0,s._)("div",xs,[(0,s._)("div",Os,(0,s.zw)(n.newPropertyData[0]),1),(0,s._)("div",Ns,[n.newPropertyData[1].loadProperty?((0,s.wg)(),(0,s.iD)("div",js,[(0,s._)("div",As,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.loadIconState]),onClick:t[0]||(t[0]=(...e)=>o.toggleLoadInfo&&o.toggleLoadInfo(...e))},null,2),Es]),(0,s.wy)((0,s._)("div",Ms,[(0,s._)("div",Fs,[Hs,(0,s._)("input",{type:"number",id:`input__load--${n.newPropertyData[0].toLowerCase()}`},null,8,Us)])],512),[[s.F8,n.showLoadInfo]])])):(0,s.kq)("",!0),n.newPropertyData[1].boundaryCondition?((0,s.wg)(),(0,s.iD)("div",Ws,[(0,s._)("div",Zs,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.boundCondIconState]),onClick:t[1]||(t[1]=(...e)=>o.toggleBoundCondInfo&&o.toggleBoundCondInfo(...e))},null,2),Bs]),(0,s.wy)((0,s._)("div",zs,["elasticity"===e.taskType||"nonlinearity"===e.taskType?((0,s.wg)(),(0,s.iD)("div",Rs,[Ys,(0,s._)("input",{type:"number",id:`input__bound-x--${n.newPropertyData[0].toLowerCase()}`},null,8,Ks)])):(0,s.kq)("",!0),"elasticity"===e.taskType||"nonlinearity"===e.taskType?((0,s.wg)(),(0,s.iD)("div",Xs,[Vs,(0,s._)("input",{type:"number",id:`input__bound-y--${n.newPropertyData[0].toLowerCase()}`},null,8,Js)])):(0,s.kq)("",!0),"filtration"===e.taskType?((0,s.wg)(),(0,s.iD)("div",Qs,[Gs,(0,s._)("input",{type:"number",id:`input__nodal-pressure--${n.newPropertyData[0].toLowerCase()}`},null,8,ei)])):(0,s.kq)("",!0),"temperature"===e.taskType?((0,s.wg)(),(0,s.iD)("div",ti,[ai,(0,s._)("input",{type:"number",id:`input__initial-temperature--${n.newPropertyData[0].toLowerCase()}`},null,8,si)])):(0,s.kq)("",!0),"temperature"===e.taskType?((0,s.wg)(),(0,s.iD)("div",ii,[ni,(0,s._)("input",{type:"number",id:`input__temperature--${n.newPropertyData[0].toLowerCase()}`},null,8,oi)])):(0,s.kq)("",!0)],512),[[s.F8,n.showBoundCondInfo]])])):(0,s.kq)("",!0),n.newPropertyData[1].plateProperty?((0,s.wg)(),(0,s.iD)("div",li,[(0,s._)("div",ri,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.plateIconState]),onClick:t[2]||(t[2]=(...e)=>o.togglePlateInfo&&o.togglePlateInfo(...e))},null,2),di]),(0,s.wy)((0,s._)("div",ci,[(0,s._)("div",ui,[pi,(0,s._)("select",{id:`select__plate--${n.newPropertyData[0].toLowerCase()}`},[mi,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.plateCharacteristics,(e=>((0,s.wg)(),(0,s.iD)("option",{key:Object.entries(e)[0][0],value:Object.entries(e)[0][0]},(0,s.zw)(Object.entries(e)[0][0]),9,hi)))),128))],8,vi)])],512),[[s.F8,n.showPlateInfo]])])):(0,s.kq)("",!0),n.newPropertyData[1].spacerProperty?((0,s.wg)(),(0,s.iD)("div",gi,[(0,s._)("div",_i,[(0,s._)("i",{class:(0,s.C_)(["fa-solid",o.balkIconState]),onClick:t[3]||(t[3]=(...e)=>o.toggleBalkInfo&&o.toggleBalkInfo(...e))},null,2),yi]),(0,s.wy)((0,s._)("div",fi,[(0,s._)("div",bi,[wi,(0,s._)("select",{id:`select__spacer--${n.newPropertyData[0].toLowerCase()}`},[ki,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.spacerCharacteristics,(e=>((0,s.wg)(),(0,s.iD)("option",{key:Object.entries(e)[0][0],value:Object.entries(e)[0][0]},(0,s.zw)(Object.entries(e)[0][0]),9,Si)))),128))],8,Di)])],512),[[s.F8,n.showBalkInfo]])])):(0,s.kq)("",!0)]),(0,s._)("div",Ti,[(0,s._)("select",{id:`select__activity--${n.newPropertyData[0].toLowerCase()}`},qi,8,Li)]),(0,s._)("div",Pi,[(0,s._)("input",{type:"text",id:`input__comment--${n.newPropertyData[0].toLowerCase()}`,placeholder:"Введите текст..."},null,8,$i)])])])}var Oi={props:["propertyData"],computed:{...(0,o.Se)(["taskType","propertiesData","characteristicsData"]),loadIconState(){return this.showLoadInfo?"fa-minus":"fa-plus"},boundCondIconState(){return this.showBoundCondInfo?"fa-minus":"fa-plus"},plateIconState(){return this.showPlateInfo?"fa-minus":"fa-plus"},balkIconState(){return this.showBalkInfo?"fa-minus":"fa-plus"}},data(){return{plateCharacteristics:[],spacerCharacteristics:[],showLoadInfo:!1,showBoundCondInfo:!1,showPlateInfo:!1,showBalkInfo:!1,newPropertyData:{}}},methods:{toggleLoadInfo(){this.showLoadInfo=!this.showLoadInfo},toggleBoundCondInfo(){this.showBoundCondInfo=!this.showBoundCondInfo},togglePlateInfo(){this.showPlateInfo=!this.showPlateInfo},toggleBalkInfo(){this.showBalkInfo=!this.showBalkInfo},initProperties(){this.characteristicsData.oneDimData.forEach((e=>{switch(Object.values(e)[0].workType){case"stretching-compression":this.spacerCharacteristics.push(e);break;case"stretching-compression-bending":this.plateCharacteristics.push(e);break}})),this.newPropertyData=Object.entries(this.propertyData)[0]}},beforeMount(){this.characteristicsData.oneDimData?.forEach((e=>{switch(console.log(e),Object.values(e)[0].workType){case"stretching-compression":this.spacerCharacteristics.push(e);break;case"stretching-compression-bending":this.plateCharacteristics.push(e);break}})),this.newPropertyData=Object.entries(this.propertyData)[0]},updated(){console.log("Updated TheLine")}};const Ni=(0,r.Z)(Oi,[["render",xi],["__scopeId","data-v-6075b5d5"]]);var ji=Ni,Ai={components:{TheLine:ji},data(){return{newLinesData:[]}},computed:{...(0,o.Se)(["propertiesData","characteristicsData"])},beforeMount(){this.newLinesData=this.propertiesData.linesProperties},updated(){this.newLinesData=this.propertiesData.linesProperties}};const Ei=(0,r.Z)(Ai,[["render",qs],["__scopeId","data-v-9d73ba72"]]);var Mi=Ei;const Fi={class:"table"},Hi=(0,s.uE)('<div class="tr" data-v-67986508><div class="th" data-v-67986508>Параметры</div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Название фазы</div><div class="td" data-v-67986508>Initial phase</div></div></div><div class="tr" data-v-67986508><div class="th" data-v-67986508>Параметры пластического расчета</div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Обнуление накопленных перемещений</div><div class="td" data-v-67986508><select id="select__displacement" data-v-67986508><option selected value="true" data-v-67986508>Да</option><option value="false" data-v-67986508>Нет</option></select></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Тип расчета</div><div class="td" data-v-67986508><select id="select__calc-type" data-v-67986508><option selected value="gravityLoading" data-v-67986508>gravity loading</option><option value="k0" data-v-67986508>k0</option></select></div></div></div><div class="tr" data-v-67986508><div class="th" data-v-67986508>Параметры численного расчета</div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Максимальное количество шагов</div><div class="td" data-v-67986508><input type="number" id="input__max-steps" placeholder="Введите кол-во шагов..." value="1000" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Погрешность расчета</div><div class="td" data-v-67986508><input type="number" id="input__tolerated-error" placeholder="Введите погрешность..." value="0.01" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Максимальное количество шагов разгрузки</div><div class="td" data-v-67986508><input type="number" id="input__max-unloading-steps" placeholder="Введите кол-во шагов..." value="5" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Доля приложения нагрузки на первом шаге</div><div class="td" data-v-67986508><input type="number" id="input__max-load-fraction" placeholder="Введите долю..." value="0.5" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Максимальное количество итераций</div><div class="td" data-v-67986508><input type="number" id="input__max-num-iteration" placeholder="Введите кол-во итераций..." value="60" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Предпочтительное минимальное количество итераций</div><div class="td" data-v-67986508><input type="number" id="input__desired-min-number" placeholder="Введите кол-во итераций..." value="5" data-v-67986508></div></div></div><div class="generated-table" data-v-67986508><div class="tr" data-v-67986508><div class="td" data-v-67986508>Предпочтительное максимальное количество итераций</div><div class="td" data-v-67986508><input type="number" id="input__desired-max-number" placeholder="Введите кол-во итераций..." value="15" data-v-67986508></div></div></div>',13),Ui=[Hi];function Wi(e,t){return(0,s.wg)(),(0,s.iD)("div",Fi,Ui)}const Zi={},Bi=(0,r.Z)(Zi,[["render",Wi],["__scopeId","data-v-67986508"]]);var zi=Bi;const Ri={class:"table"},Yi=(0,s.uE)('<div class="tr" data-v-25890078><div class="th" data-v-25890078>Параметры</div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Название фазы</div><div class="td" data-v-25890078><input type="text" id="input__phase-id" placeholder="Введите название фазы..." data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Начинается после фазы</div><div class="td" data-v-25890078><input type="text" id="input__start-from" placeholder="Введите название фазы..." data-v-25890078></div></div></div><div class="tr" data-v-25890078><div class="th" data-v-25890078>Параметры пластического расчета</div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Обнуление накопленных перемещений</div><div class="td" data-v-25890078><select id="select__displacement" data-v-25890078><option selected value="true" data-v-25890078>Да</option><option value="false" data-v-25890078>Нет</option></select></div></div></div><div class="tr" data-v-25890078><div class="th" data-v-25890078>Параметры численного расчета</div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Максимальное количество шагов</div><div class="td" data-v-25890078><input type="number" id="input__max-steps" placeholder="Введите кол-во шагов..." value="1000" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Погрешность расчета</div><div class="td" data-v-25890078><input type="number" id="input__tolerated-error" placeholder="Введите погрешность..." value="0.01" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Максимальное количество шагов разгрузки</div><div class="td" data-v-25890078><input type="number" id="input__max-unloading-steps" placeholder="Введите кол-во шагов..." value="5" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Доля приложения нагрузки на первом шаге</div><div class="td" data-v-25890078><input type="number" id="input__max-load-fraction" placeholder="Введите долю..." value="0.5" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Максимальное количество итераций</div><div class="td" data-v-25890078><input type="number" id="input__max-num-iteration" placeholder="Введите кол-во итераций..." value="60" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Предпочтительное минимальное количество итераций</div><div class="td" data-v-25890078><input type="number" id="input__desired-min-number" placeholder="Введите кол-во итераций..." value="5" data-v-25890078></div></div></div><div class="generated-table" data-v-25890078><div class="tr" data-v-25890078><div class="td" data-v-25890078>Предпочтительное максимальное количество итераций</div><div class="td" data-v-25890078><input type="number" id="input__desired-max-number" placeholder="Введите кол-во итераций..." value="15" data-v-25890078></div></div></div>',13),Ki=[Yi];function Xi(e,t){return(0,s.wg)(),(0,s.iD)("div",Ri,Ki)}const Vi={},Ji=(0,r.Z)(Vi,[["render",Xi],["__scopeId","data-v-25890078"]]);var Qi=Ji,Gi={props:["stageName","stageType","taskType"],components:{SoilTable:Ls,LineTable:Mi,InitTable:zi,PhaseTable:Qi}};const en=(0,r.Z)(Gi,[["render",ts],["__scopeId","data-v-73437324"]]);var tn=en;const an={key:0,class:"table"},sn=(0,s.uE)('<div class="tr two-cols"><div class="th">Параметр</div><div class="th">Величина</div></div><div class="generated-table"><div class="tr two-cols"><div class="td">Время расчета, с</div><div class="td"><input type="number" id="input__calc-time" placeholder="Введите время..."></div></div></div><div class="generated-table"><div class="tr two-cols"><div class="td">Кол-во шагов интегрирования по времени</div><div class="td"><input type="number" id="input__num-steps" placeholder="Введите количество шагов..."></div></div></div>',3),nn=[sn];function on(e,t,a,i,n,o){return"temperature"===e.taskType?((0,s.wg)(),(0,s.iD)("div",an,nn)):(0,s.kq)("",!0)}var ln={computed:{...(0,o.Se)(["taskType"])}};const rn=(0,r.Z)(ln,[["render",on]]);var dn=rn,cn={components:{TheStage:tn,TemperatureTable:dn},data(){return{twoDimData:null,oneDimData:null,rawStageData:{soils:[],lines:[]},phasesNum:0}},computed:{...(0,o.Se)(["taskType","characteristicsData","propertiesData","stageData"])},methods:{...(0,o.nv)(["sendStageData","sendToast","sendIsUpdated"]),addPhase(){this.phasesNum++},applyStage(){let e=[],t=[];if(this.propertiesData.polygonsProperties.forEach((t=>{const[a]=[...Object.keys(t)];if("nonlinearity"===this.taskType){let t=[],s=[],i=[];const n=document.querySelectorAll(`#select__material--${a.toLowerCase()}`);n.forEach((e=>t.push(e.value)));const o=document.querySelectorAll(`#select__activity--${a.toLowerCase()}`);o.forEach((e=>s.push("true"===e.value)));const l=document.querySelectorAll(`#input__comment--${a.toLowerCase()}`);l.forEach((e=>i.push(e.value))),t.forEach(((t,n)=>{e[n]||e.push({soils:[]}),e[n].soils.push({name:a,material:t,phaseActivity:s[n],comment:i[n]})}))}else{const e=document.querySelector(`#select__material--${a.toLowerCase()}`).value,t=Object.values(this.characteristicsData.twoDimData).find((t=>Object.keys(t)[0]===e)),s="true"===document.querySelector(`#select__activity--${a.toLowerCase()}`).value,i=document.querySelector(`#input__comment--${a.toLowerCase()}`).value;this.rawStageData.soils.push({name:a,material:t||null,phaseActivity:s,comment:i})}})),this.propertiesData.linesProperties.forEach((e=>{const[a]=[...Object.keys(e)];if("nonlinearity"===this.taskType){let s=[],i=[],n=[],o=[],l=[];const r=document.querySelectorAll(`#select__activity--${a.toLowerCase()}`);r.forEach((e=>o.push("true"===e.value)));const d=document.querySelectorAll(`#input__comment--${a.toLowerCase()}`);if(d.forEach((e=>{l.push(e.value)})),Object.values(e)[0].boundaryCondition){const e=document.querySelectorAll(`#input__bound-x--${a.toLowerCase()}`),t=document.querySelectorAll(`#input__bound-y--${a.toLowerCase()}`);e.forEach(((a,i)=>{s[i]||s.push({}),""!==e[i].value&&(s[i].ux=Number(e[i].value)),""!==t[i].value&&(s[i].uy=Number(t[i].value))}))}if(Object.values(e)[0].loadProperty){const e=document.querySelectorAll(`#input__load--${a.toLowerCase()}`);e.forEach(((e,t)=>{s[t]||s.push({}),s[t].q=Number(e.value)}))}if(Object.values(e)[0].plateProperty){const e=document.querySelectorAll(`#select__material--${a.toLowerCase()}`);e.forEach((e=>i.push(e.value))),i.forEach(((e,t)=>{s[t]||s.push({}),s[t].plateMaterial=e||null}))}if(Object.values(e)[0].spacerProperty){const e=document.querySelectorAll(`#select__spacer--${a.toLowerCase()}`);e.forEach((e=>n.push(e.value))),n.forEach(((e,t)=>{s[t]||s.push({}),s[t].spacerMaterial=e||null}))}o.forEach(((e,i)=>{t[i]||t.push({lines:[]}),t[i].lines.push({name:a,phaseActivity:o[i],propertyParams:s[i],comment:l[i]})}))}else{const t="true"===document.querySelector(`#select__activity--${a.toLowerCase()}`).value;let s={};if(console.log(this.taskType),Object.values(e)[0].boundaryCondition)if("elasticity"===this.taskType){const e=document.querySelector(`#input__bound-x--${a.toLowerCase()}`).value,t=document.querySelector(`#input__bound-y--${a.toLowerCase()}`).value;""!==e&&(s.ux=Number(e)),""!==t&&(s.uy=Number(t))}else if("filtration"===this.taskType){const e=document.querySelector(`#input__nodal-pressure--${a.toLowerCase()}`).value;s.nodalPressure=Number(e)}else if("temperature"===this.taskType){const e=document.querySelector(`#input__temperature--${a.toLowerCase()}`).value,t=document.querySelector(`#input__initial-temperature--${a.toLowerCase()}`).value;s.boundaryTemp=Number(e),s.initialTemp=Number(t)}if(Object.values(e)[0].loadProperty){const e=Number(document.querySelector(`#input__load--${a.toLowerCase()}`).value);s.q=e}if(Object.values(e)[0].plateProperty){const e=document.querySelector(`#select__plate--${a.toLowerCase()}`).value,t=Object.values(this.characteristicsData.oneDimData).find((t=>Object.keys(t)[0]===e));s.plateMaterial=t||null}if(Object.values(e)[0].spacerProperty){const e=document.querySelector(`#select__spacer--${a.toLowerCase()}`).value,t=Object.values(this.characteristicsData.oneDimData).find((t=>Object.keys(t)[0]===e));s.spacerMaterial=t||null}const i=document.querySelector(`#input__comment--${a.toLowerCase()}`).value;this.rawStageData.lines.push({name:a,phaseActivity:t,propertyParams:s,comment:i})}})),"temperature"===this.taskType){const e=document.querySelector("#input__calc-time").value,t=document.querySelector("#input__num-steps").value;this.rawStageData.timeSteps={calcTime:e,numSteps:t}}let a={Initial_phase:{}};if("nonlinearity"===this.taskType){const a=document.querySelectorAll("#input__phase-id"),s=document.querySelectorAll("#input__start-from"),i=document.querySelector("#select__calc-type"),n=document.querySelectorAll("#select__displacement"),o=document.querySelectorAll("#input__max-steps"),l=document.querySelectorAll("#input__tolerated-error"),r=document.querySelectorAll("#input__max-unloading-steps"),d=document.querySelectorAll("#input__max-load-fraction"),c=document.querySelectorAll("#input__max-num-iteration"),u=document.querySelectorAll("#input__desired-min-number"),p=document.querySelectorAll("#input__desired-max-number");let v=[];e.forEach(((a,s)=>{0===s?v.push({id:"Initial phase",data:{soils:e[s].soils,lines:t[s].lines}}):v.push({id:`Phase ${s}`,data:{soils:e[s].soils,lines:t[s].lines}})})),v.forEach(((e,t)=>{0===t?(v[t].id="Initial phase",v[t].startFromPhase=null,v[t].deformationControlParameters={resetDisplacementToZero:"true"===n[t].value,calculationType:i.value},v[t].numericalControlParameters={maxSteps:Number(o[t].value),toleratedError:Number(l[t].value),maxUnloadingSteps:Number(r[t].value),maxLoadFractionPerStep:Number(d[t].value),maxNumberOfIterations:Number(c[t].value),desiredMinNumberOfIterations:Number(u[t].value),desiredMaxNumberOfIterations:Number(p[t].value)}):(v[t].id=a[t-1].value,v[t].startFromPhase=s[t-1].value,v[t].deformationControlParameters={resetDisplacementToZero:"true"===n[t].value},v[t].numericalControlParameters={maxSteps:Number(o[t].value),toleratedError:Number(l[t].value),maxUnloadingSteps:Number(r[t].value),maxLoadFractionPerStep:Number(d[t].value),maxNumberOfIterations:Number(c[t].value),desiredMinNumberOfIterations:Number(u[t].value),desiredMaxNumberOfIterations:Number(p[t].value)})})),this.sendStageData({stageData:{}}),this.sendStageData({stageData:v})}else"filtration"===this.taskType||"temperature"===this.taskType?(this.sendStageData({stageData:{}}),this.sendStageData({stageData:this.rawStageData})):(a.Initial_phase=this.rawStageData,this.sendStageData({stageData:{}}),this.sendStageData({stageData:a}));this.rawStageData={soils:[],lines:[]},console.log("stageData"),console.log(this.stageData),this.sendToast({toastInfo:{msg:"Данные расчетного этапа успешно сохранены!",type:"ok"}}),this.sendIsUpdated({isUpdated:!0})}}};const un=(0,r.Z)(cn,[["render",Ga],["__scopeId","data-v-e5e6fcac"]]);var pn=un,vn={components:{TablesStage:pn},computed:{...(0,o.Se)(["gmshData"])},mounted(){if(null===this.gmshData)return;mpld3.draw_figure("fig01",this.gmshData);const e=document.querySelector(".mpld3-staticpaths");Array.from(e.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}))},updated(){const e=document.querySelector("#fig01");e.innerHTML="",mpld3.draw_figure("fig01",this.gmshData);const t=document.querySelector(".mpld3-staticpaths");Array.from(t.children).forEach(((e,t)=>{0===t&&e.remove(),t>0&&Array.from(e.children).forEach(((e,t)=>{t<2&&e.remove()}))}))}};const mn=(0,r.Z)(vn,[["render",Ja],["__scopeId","data-v-09460acc"]]);var hn=mn;const gn=e=>((0,s.dD)("data-v-57793bb6"),e=e(),(0,s.Cn)(),e),_n=gn((()=>(0,s._)("h1",{class:"bubble"},"Этап 5. Результаты расчета",-1))),yn={class:"figures__container"},fn={id:"fig1__container"},bn=gn((()=>(0,s._)("div",{id:"min-max-values-fig1",class:"min-max-values__container"},null,-1))),wn={id:"fig2__container"},Dn=gn((()=>(0,s._)("div",{class:"solver-input__container"},null,-1))),kn=gn((()=>(0,s._)("div",{id:"min-max-values-fig2",class:"min-max-values__container"},null,-1))),Sn={id:"fig3__container"},Tn=gn((()=>(0,s._)("div",{id:"min-max-values-fig3",class:"min-max-values__container"},null,-1))),Ln={id:"fig4__container"},Cn=gn((()=>(0,s._)("div",{id:"min-max-values-fig4",class:"min-max-values__container"},null,-1))),In={id:"fig5__container"},qn=gn((()=>(0,s._)("div",{id:"min-max-values-fig5",class:"min-max-values__container"},null,-1))),Pn={id:"fig6__container"},$n=gn((()=>(0,s._)("div",{id:"min-max-values-fig6",class:"min-max-values__container"},null,-1))),xn={id:"fig7__container"},On=gn((()=>(0,s._)("div",{id:"min-max-values-fig7",class:"min-max-values__container"},null,-1))),Nn={id:"fig8__container"},jn=gn((()=>(0,s._)("div",{id:"min-max-values-fig8",class:"min-max-values__container"},null,-1))),An={id:"fig9__container"},En=gn((()=>(0,s._)("div",{id:"min-max-values-fig9",class:"min-max-values__container"},null,-1))),Mn={id:"fig10__container"},Fn=gn((()=>(0,s._)("div",{id:"min-max-values-fig10",class:"min-max-values__container"},null,-1))),Hn={id:"fig11__container"},Un=gn((()=>(0,s._)("div",{id:"min-max-values-fig11",class:"min-max-values__container"},null,-1))),Wn={id:"fig12__container"},Zn=gn((()=>(0,s._)("div",{id:"min-max-values-fig12",class:"min-max-values__container"},null,-1))),Bn={id:"fig13__container"},zn=gn((()=>(0,s._)("div",{id:"min-max-values-fig13",class:"min-max-values__container"},null,-1)));function Rn(e,t,a,i,n,o){const l=(0,s.up)("the-figure");return(0,s.wg)(),(0,s.iD)("section",null,[_n,(0,s._)("div",yn,[(0,s._)("div",fn,[(0,s.Wm)(l,{"figure-name":"fig1"}),bn]),(0,s._)("div",wn,[Dn,(0,s.Wm)(l,{"figure-name":"fig2"}),kn]),(0,s._)("div",Sn,[(0,s.Wm)(l,{"figure-name":"fig3"}),Tn]),(0,s._)("div",Ln,[(0,s.Wm)(l,{"figure-name":"fig4"}),Cn]),(0,s._)("div",In,[(0,s.Wm)(l,{"figure-name":"fig5"}),qn]),(0,s._)("div",Pn,[(0,s.Wm)(l,{"figure-name":"fig6"}),$n]),(0,s._)("div",xn,[(0,s.Wm)(l,{"figure-name":"fig7"}),On]),(0,s._)("div",Nn,[(0,s.Wm)(l,{"figure-name":"fig8"}),jn]),(0,s._)("div",An,[(0,s.Wm)(l,{"figure-name":"fig9"}),En]),(0,s._)("div",Mn,[(0,s.Wm)(l,{"figure-name":"fig10"}),Fn]),(0,s._)("div",Hn,[(0,s.Wm)(l,{"figure-name":"fig11"}),Un]),(0,s._)("div",Wn,[(0,s.Wm)(l,{"figure-name":"fig12"}),Zn]),(0,s._)("div",Bn,[(0,s.Wm)(l,{"figure-name":"fig13"}),zn])])])}var Yn={computed:{...(0,o.Se)(["taskType","stageData","coordsData","polygonsData","linesData","characteristicsData","isUpdated"])},data(){return{values:{},stepNum:0,phaseName:"Initial phase"}},async beforeMount(){this.sendToast({toastInfo:{msg:"Загрузка расчетов...",type:"info"}}),this.sendIsLoading({isLoading:!0}),console.log(this.taskType);await this.loadSolverData(this.taskType);this.sendIsLoading({isLoading:!1})},async mounted(){this.initToolTip()},async updated(){if(console.log(`isUpdated: ${this.isUpdated}`),!this.isUpdated)return;this.sendToast({toastInfo:{msg:"Обновление результатов...",type:"info"}}),this.sendIsLoading({isLoading:!0});const e=document.querySelector(".solver-input__container");e.innerHTML="",this.phaseName="Initial phase",console.log("Updated CalculatedResults");const t=document.querySelectorAll(".mpld3-tooltip");t.forEach((e=>e.remove()));for(let n=0;n<13;n++){const e=document.querySelector(`#fig${n+1}`);e.innerHTML=""}const a=document.querySelector("#step-num"),s=document.querySelector("#solver-btn");a&&(a.remove(),s.remove());const i=document.querySelectorAll(".min-max-values__container");i.forEach((e=>{e.innerHTML=""}));await this.loadSolverData(this.taskType);this.initToolTip(),this.sendIsLoading({isLoading:!1}),this.sendIsUpdated({isUpdated:!1})},methods:{...(0,o.nv)(["sendToast","sendIsUpdated","sendIsLoading"]),async loadSolverData(e,t="Initial phase"){this.isUpdated&&(this.stepNum=0);const a=$("input[name=csrfmiddlewaretoken]").val(),s=await C.Z.post("api/solver/",{task_type:e,phase_name:t,input_data:this.stageData,coor_data:this.coordsData,polygons_data:this.polygonsData,lines_data:this.linesData,step_num:this.stepNum,materials_data:this.characteristicsData},{headers:{"Content-Type":"application/json","X-CSRFToken":a}});if(console.log(s.data),400===s.data.status)return void this.sendToast({toastInfo:{msg:s.data.msg,type:"error"}});this.values=s.data.min_max_values;const i=Object.values(this.values);if(console.log(this.values),console.log(i),"elasticity"===e){this.sendToast({toastInfo:{msg:"Расчет упругости успешно завершен!",type:"ok"}});for(let e=1;e<=13;e++){const t=`static/src/dist/results/elasticity/isofields_${e}.json`,a=await fetch(t),s=await a.json(),n=document.querySelector(`#fig${e}`),o=document.querySelector(`#min-max-values-fig${e}`);n.innerHTML="",o.innerHTML=`\n            <div class="min-max-values__container">\n              <div class="fig-max" style="margin-bottom: 0.6rem;">\n                Макс. значение: ${i[e-1].max}\n              </div>\n              <div class="fig-min">\n                Мин. значение: ${i[e-1].min}\n              </div>\n            </div>\n          `,mpld3.draw_figure(`fig${e}`,s)}}else if("filtration"===e){this.sendToast({toastInfo:{msg:"Расчет фильтрации успешно завершен!",type:"ok"}});const e=s.data.units;console.log(e);for(let t=0;t<e.length+1;t++){const a=`static/src/dist/results/filtration/isofields_${t+1}.json`,s=await fetch(a),n=await s.json(),o=document.querySelector(`#fig${t+1}`),l=document.querySelector(`#min-max-values-fig${t+1}`);o.innerHTML="",t<=7&&""!==e[t]?l.innerHTML=`\n              <div class="min-max-values__container">\n                <div class="fig-max" style="margin-bottom: 0.6rem;">\n                  Макс. значение, ${e[t]}: ${i[t].max}\n                </div>\n                <div class="fig-min">\n                  Мин. значение, ${e[t]}: ${i[t].min}\n                </div>\n              </div>\n            `:t<=7&&(l.innerHTML=`\n              <div class="min-max-values__container">\n                <div class="fig-max" style="margin-bottom: 0.6rem;">\n                  Макс. значение: ${i[t].max}\n                </div>\n                <div class="fig-min">\n                  Мин. значение: ${i[t].min}\n                </div>\n              </div>\n            `),mpld3.draw_figure(`fig${t+1}`,n)}}else if("temperature"===e){const e="static/src/dist/results/temperature/isofields.json",t=await fetch(e),a=await t.json(),n=document.querySelector("#fig2"),o=document.querySelector("#min-max-values-fig2"),l=document.querySelector(".solver-input__container");n.innerHTML="",o.innerHTML=`\n            <div class="min-max-values__container">\n              <div class="fig-max" style="margin-bottom: 0.6rem;">\n                Макс. значение, °C: ${i[0].max}\n              </div>\n              <div class="fig-min">\n                Мин. значение, °C: ${i[0].min}\n              </div>\n            </div>\n          `,mpld3.draw_figure("fig2",a),l.innerHTML="",l.insertAdjacentHTML("afterbegin",'\n            <select id="step-num"></select>\n            <button class="btn bubble" id="solver-btn" @click="test" type="button">Применить</button>\n          ');const r=s.data.select_values,d=document.querySelector("#step-num");r.forEach(((e,t)=>{d.insertAdjacentHTML("beforeend",`\n              <option value="${t}">${e}</option>\n            `)})),d.value=this.stepNum;const c=document.querySelector("#solver-btn"),u=this;c.addEventListener("click",(async function(){u.sendToast({toastInfo:{msg:"Загрузка новых расчетов...",type:"info"}});const e=document.querySelectorAll(".mpld3-tooltip");e.forEach((e=>e.remove())),u.stepNum=d.value;await u.loadSolverData(u.taskType)})),this.sendToast({toastInfo:{msg:"Расчет температуры успешно завершен!",type:"ok"}})}else if("nonlinearity"===this.taskType){this.sendToast({toastInfo:{msg:"Расчет нелинейности успешно завершен!",type:"ok"}});const e=document.querySelector(".solver-input__container");e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n            <select id="phase-name"></select>\n            <button class="btn bubble" id="solver-btn" @click="test" type="button">Применить</button>\n          ');let t=[];this.stageData.forEach((e=>{t.push(e.id)}));const a=document.querySelector("#phase-name");t.forEach((e=>{a.insertAdjacentHTML("beforeend",`\n              <option value="${e}">${e}</option>\n            `)})),a.value=this.phaseName;const s=document.querySelector("#solver-btn"),n=this;s.addEventListener("click",(async function(){n.sendToast({toastInfo:{msg:"Загрузка новых расчетов...",type:"info"}});const e=document.querySelectorAll(".mpld3-tooltip");e.forEach((e=>e.remove())),n.sendIsLoading({isLoading:!0}),s.classList.add("disabled__btn");for(let t=1;t<=9;t++){const e=document.querySelector(`#fig${t}`),a=document.querySelector(`#min-max-values-fig${t}`);e.innerHTML="",a.innerHTML=""}n.phaseName=a.value;await n.loadSolverData(n.taskType,n.phaseName);n.sendIsLoading({isLoading:!1}),s.classList.remove("disabled__btn")}));for(let o=1;o<=9;o++){const e=`static/src/dist/results/nonlinearity/isofields_${o}.json`,t=await fetch(e),a=await t.text(),s=await JSON.parse(a.replace(/\bNaN\b/g,"null")),n=(document.querySelector(`#fig${o}`),document.querySelector(`#min-max-values-fig${o}`));o<=8&&(n.innerHTML=`\n            <div class="min-max-values__container">  \n              <div class="fig-max" style="margin-bottom: 0.6rem;">\n                Макс. значение: ${i[o-1].max}\n              </div>\n              <div class="fig-min">\n                Мин. значение: ${i[o-1].min}\n              </div>\n            </div>\n          `),mpld3.draw_figure(`fig${o}`,s)}}this.sendIsUpdated({isUpdated:!1})},initToolTip(){function e(e,t){mpld3.Plugin.call(this,e,t)}mpld3.register_plugin("htmltooltip",e),e.prototype=Object.create(mpld3.Plugin.prototype),e.prototype.constructor=e,e.prototype.requiredProps=["id"],e.prototype.defaultProps={labels:null,target:null,hoffset:0,voffset:10,targets:null},e.prototype.draw=function(){var e=mpld3.get_element(this.props.id),t=this.props.labels,a=(this.props.targets,d3.select("body").select("div").append("div").attr("class","mpld3-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden"));e.elements().on("mouseover",(function(e,s){a.html(t[s]).style("visibility","visible")})).on("mousemove",function(e,t){a.style("top",d3.event.pageY+this.props.voffset+"px").style("left",d3.event.pageX+this.props.hoffset+"px")}.bind(this)).on("mouseout",(function(e,t){a.style("visibility","hidden")}))}}}};const Kn=(0,r.Z)(Yn,[["render",Rn],["__scopeId","data-v-57793bb6"]]);var Xn=Kn;const Vn=(0,m.p7)({history:(0,m.PO)(),routes:[{path:"/",redirect:"/page1"},{path:"/page1",component:P},{path:"/page2",component:ve},{path:"/page3",component:Ka},{path:"/page4",component:hn},{path:"/page5",component:Xn}]});var Jn=Vn;const Qn=(0,o.MT)({state(){return{taskType:null,jsonData:null,calculatedSchemeData:null,linesData:[],polygonsData:[],coordsData:[],isUpdated:!1,isLoading:!1,stageData:[],propertiesData:{},characteristicsData:{oneDimData:[],twoDimData:[{"Мат_1":{weight:20,poisson:.3,mechParameter:"mohr-coloumb",elasticModulus:3e4,internalFrictionAngle:20,adhesion:30,dilatancyAngle:0,tensileStrength:0}},{"Мат_2":{weight:20,poisson:.3,mechParameter:"mohr-coloumb",elasticModulus:1e4,internalFrictionAngle:10,adhesion:10,dilatancyAngle:0,tensileStrength:0}},{"Мат_3":{weight:100,poisson:.3,mechParameter:"linear-elastic",elasticModulus:3e7}}]}}},mutations:{setIsUpdated(e,t){e.isUpdated=t.isUpdated},setIsLoading(e,t){e.isLoading=t.isLoading},showToast(e,t){switch(toastr.options.progressBar=!0,toastr.options.positionClass="toast-bottom-right",t.type){case"ok":toastr.success(t.msg);break;case"error":toastr.error(t.msg);break;case"warning":toastr.warning(t.msg);break;case"info":toastr.info(t.msg);break}},setTaskType(e,t){e.taskType=t.taskType},setData(e,t){e.jsonData=t.jsonData,e.calculatedSchemeData=t.calculatedSchemeData},setLinesData(e,t){e.linesData=t.linesData},setPolygonsData(e,t){e.polygonsData=t.polygonsData},setCoordsData(e,t){e.coordsData=t.coordsData},setStageData(e,t){e.stageData=t.stageData},setPropertiesData(e,t){e.propertiesData=t.propertiesData},setCharacteristicsData(e,t){e.characteristicsData=t.characteristicsData}},actions:{sendIsLoading(e,t){e.commit("setIsLoading",{isLoading:t.isLoading})},sendIsUpdated(e,t){e.commit("setIsUpdated",{isUpdated:t.isUpdated})},sendToast(e,t){e.commit("showToast",t.toastInfo)},sendTaskType(e,t){e.commit("setTaskType",{taskType:t.taskType})},sendDataFromFile(e,t){e.commit("setData",{jsonData:t.jsonData,calculatedSchemeData:t.calculatedSchemeData})},sendLinesData(e,t){e.commit("setLinesData",{linesData:t.linesData})},sendPolygonsData(e,t){e.commit("setPolygonsData",{polygonsData:t.polygonsData})},sendCoordsData(e,t){e.commit("setCoordsData",{coordsData:t.coordsData})},sendStageData(e,t){e.commit("setStageData",{stageData:t.stageData})},sendPropertiesData(e,t){e.commit("setPropertiesData",{propertiesData:t.propertiesData})},sendCharacteristicsData(e,t){e.commit("setCharacteristicsData",{characteristicsData:t.characteristicsData})}},getters:{taskType(e){return e.taskType},gmshData(e){return e.jsonData},calculatedSchemeData(e){return e.calculatedSchemeData},linesData(e){return e.linesData},polygonsData(e){return e.polygonsData},coordsData(e){return e.coordsData},stageData(e){return e.stageData},propertiesData(e){return e.propertiesData},characteristicsData(e){return e.characteristicsData},isUpdated(e){return e.isUpdated},isLoading(e){return e.isLoading}}});var Gn=Qn;const eo=["id"];function to(e,t,a,i,n,o){return(0,s.wg)(),(0,s.iD)("div",{id:a.figureName},[(0,s.WI)(e.$slots,"default")],8,eo)}var ao={props:["figureName"]};const so=(0,r.Z)(ao,[["render",to]]);var io=so;const no={open:""};function oo(e,t,a,i,n,o){return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",{onClick:t[0]||(t[0]=t=>e.$emit("close"))}),(0,s._)("dialog",no,[(0,s._)("header",null,[(0,s._)("h2",null,(0,s.zw)(a.title),1)]),(0,s._)("section",null,[(0,s.WI)(e.$slots,"default",{},void 0,!0)]),(0,s._)("menu",null,[(0,s.WI)(e.$slots,"action",{},(()=>[(0,s._)("button",{type:"button",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"Закрыть")]),!0)])])])}var lo={props:{title:{type:String,required:!1}},emits:["close"]};const ro=(0,r.Z)(lo,[["render",oo],["__scopeId","data-v-26801e5d"]]);var co=ro;const uo=(0,s.ri)(v);uo.use(Jn),uo.use(Gn),uo.component("the-figure",io),uo.component("base-dialog",co),uo.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],n=e[c][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(l=!1,n<o&&(o=n));if(l){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,i,n]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,o=s[0],l=s[1],r=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(r)var c=r(a)}for(t&&t(s);d<o.length;d++)n=o[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5274)}));s=a.O(s)})();
//# sourceMappingURL=app.js.map